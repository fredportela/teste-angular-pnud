<div class="dashboard-container">
  <div class="stats-cards">
    
    <div class="stat-card total clickable" 
         *ngIf="!loading" 
         (click)="navigateToUsers()"
         [title]="'Clique para ver todos os usuários'">
      <div class="stat-icon">
        <mat-icon>people</mat-icon>
      </div>
      <div class="stat-content">
        <div class="stat-number">{{ totalUsers }}</div>
        <div class="stat-label">Total de Usuários</div>
      </div>
    </div>

    <div class="stat-card skeleton-card" *ngIf="loading">
      <div class="stat-icon skeleton-icon"></div>
      <div class="stat-content">
        <div class="stat-number skeleton-number"></div>
        <div class="stat-label skeleton-label"></div>
      </div>
    </div>

    <div class="stat-card active clickable" 
         *ngIf="!loading" 
         (click)="navigateToUsers('active')"
         [title]="'Clique para ver usuários ativos'">
      <div class="stat-icon">
        <mat-icon>check_circle</mat-icon>
      </div>
      <div class="stat-content">
        <div class="stat-number">{{ activeUsers }}</div>
        <div class="stat-label">Usuários Ativos</div>
      </div>
    </div>

    <div class="stat-card skeleton-card" *ngIf="loading">
      <div class="stat-icon skeleton-icon"></div>
      <div class="stat-content">
        <div class="stat-number skeleton-number"></div>
        <div class="stat-label skeleton-label"></div>
      </div>
    </div>

    <div class="stat-card inactive clickable" 
         *ngIf="!loading" 
         (click)="navigateToUsers('inactive')"
         [title]="'Clique para ver usuários inativos'">
      <div class="stat-icon">
        <mat-icon>cancel</mat-icon>
      </div>
      <div class="stat-content">
        <div class="stat-number">{{ inactiveUsers }}</div>
        <div class="stat-label">Usuários Inativos</div>
      </div>
    </div>

    <div class="stat-card skeleton-card" *ngIf="loading">
      <div class="stat-icon skeleton-icon"></div>
      <div class="stat-content">
        <div class="stat-number skeleton-number"></div>
        <div class="stat-label skeleton-label"></div>
      </div>
    </div>
  </div>

  <div class="chart-container">
    <mat-card>
      <mat-card-header>
        <mat-card-title *ngIf="!loading">Usuários por Status</mat-card-title>
        <div class="skeleton-title" *ngIf="loading"></div>
      </mat-card-header>
      <mat-card-content>
        
        <div class="pie-chart" *ngIf="!loading">
          <div class="chart-segment active" 
               [style.width.%]="getPercentage(activeUsers, totalUsers)"
               [style.background-color]="'#4caf50'">
            <span class="segment-label">{{ getPercentage(activeUsers, totalUsers) }}%</span>
          </div>
          <div class="chart-segment inactive" 
               [style.width.%]="getPercentage(inactiveUsers, totalUsers)"
               [style.background-color]="'#f44336'">
            <span class="segment-label">{{ getPercentage(inactiveUsers, totalUsers) }}%</span>
          </div>
        </div>

        <div class="pie-chart skeleton-chart" *ngIf="loading">
          <div class="chart-segment skeleton-segment"></div>
          <div class="chart-segment skeleton-segment"></div>
        </div>
        
        <div class="chart-legend" *ngIf="!loading">
          <div class="legend-item">
            <div class="legend-color active"></div>
            <span>Ativos ({{ activeUsers }})</span>
          </div>
          <div class="legend-item">
            <div class="legend-color inactive"></div>
            <span>Inativos ({{ inactiveUsers }})</span>
          </div>
        </div>

        <div class="chart-legend skeleton-legend" *ngIf="loading">
          <div class="legend-item">
            <div class="legend-color skeleton-legend-color"></div>
            <div class="skeleton-legend-text"></div>
          </div>
          <div class="legend-item">
            <div class="legend-color skeleton-legend-color"></div>
            <div class="skeleton-legend-text"></div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
